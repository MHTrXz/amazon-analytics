\chapter{ساختار شکست کار}
در این فصل، ساختار شکست کار پروژه‌ی
\lr{Amazon Analytics}
نوشته شده است. این ساختار بر اساس فصل ششم اسلاید‌های استاد نوشته شده‌اند. در این فصل سعی شده است ساختار شکست کار، برای قسمت‌های \textit{کد نویسی} پروژه نوشته بشود، و به کارهایی که در گام اول و دوم پروژه مربوط هستند پرداخته نشده ‌است.

موارد تحویل دادنی که در فاز دوم تحت عنوان \textit{موارد تحویل دادنی} نوشته شده‌اند، نقطه سطح بالای شروع نوشتن ساختار شرکت کار برای پروژه 
\lr{Amazon Analytics}
هستند.

سپس این نقاط سطح بالا بر اساس ۳ قسمت اصلی فرض شده برای شرکت آمازون (\lr{Stock}، \lr{Site} و \lr{Shipment}) شکسته می‌شوند، و برای هر قسمت بسته‌های کاری کوچک‌تری نوشته می‌شوند.

یک سری از بسته‌های کاری نرم‌افزاری نبوده و نیاز به ماژول‌های سخت‌افزاری و نصب فیزیکی هستند، که از بسته‌ی کاری آنها صرفا یک اسم آورده شده و نقطه‌ی عطف آنها نصب و تست ماژول‌‌های سخت‌افزاری خواهد بود.


\section{وب سرویس جمع‌آوری داده}\label{sec:gatherer}
وظیفه‌ی این وب سرویس
\begin{enumerate*}
\item 
جمع‌آوری داده،
\item 
ذخیره‌ی داده و
\item 
ارائه داده\RTLfootnote{ارائه داده یعنی از ابزارات قوی برای جستجو و برگرداندن داده از دیتابیس استفاده کند، برای مثال \lr{GraphQL}}
\end{enumerate*}
است.

این سرویس تمامی داده‌های مورد نیاز را از قسمت‌های مختلف و اصلی شرکت جمع‌آوری کرده، آنها به صورت بهینه ذخیره کرده و امکانات قدرتمند برای بازیابی اطلاعات را در اختیار استفاده کنندگان سرویس، قرار می‌دهد.

در ادامه راجع به قسمت‌های مختلف شرکت و ارتباط آنها با وب سرویس توضیح داده خواهد شد و در نهایت بسته شکست کاری این قسمت نشان داده می‌شود.

\subsection{\lr{Stock}}\label{ssec:stock}
قسمت \lr{Stock} تمامی کار‌‌های انبار‌داری شرکت را انجام می‌دهد. مهم‌ترین کار‌هایی که انجام می‌دهد عبارتند از
\begin{enumerate*}
\item 
وقتی کسی محصولات را می‌بیند، از موجود بودن یا نبودن‌ آن اطمینان حاصل کند،
\item 
اگر سفارشی ثبت شد، پردازش آن را انجام دهد،

\item 
محصول را به حلقه‌ی بعدی زنجیره پردازش و تحویل کالا بدهد.
\end{enumerate*}

قسمت اعظمی از کار‌هایی که این قسمت انجام می‌دهد، به صورت سیستمی و کامپیوتری انجام می‌شوند؛ و نکته‌ی مهم اینست که برای \textit{رصد کردن} عملکرد این قسمت باید قسمت‌های نرم‌افزاری برای \lr{monitoring} به کد‌های این قسمت اضافه شوند. 

\subsection{\lr{Site}}\label{ssec:site}
بیشتر اطلاعاتی که ما در قسمت 
\lr{Site}
از شرکت جمع‌آوری میکنیم، اطلاعات بازخوردی از کاربران و مشتریان شرکت هستند. در کنار این اطلاعات ما اطلاعات سیستمی و نرم‌افزاری که بیشتر به صورت آماری هستند هم برای ارزیابی عملکرد این قسمت جمع‌آوری میکنیم.

موارد بازخوردی شامل
\begin{enumerate*}
\item گرفتن بازخورد در مورد صفحات توضیح ویژگی محصولات،
\item بازخورد راجع به فروشنده،
\item بازخورد در مورد محصول خریداری شده (بعد از خرید) و
\item بازخورد در مورد طراحی و تجربه‌ی کاربری سایت
\end{enumerate*} 
هستند. و اطلاعات آماری که شامل
\begin{enumerate*}
\item تست سرعت بارگذاری سایت
\end{enumerate*}
هست.

\subsection{\lr{Shipment}}\label{ssec:shipment}
قسمت اعظم اطلاعاتی که از قسمت 
\lr{Shipment}
نیاز به دریافت داریم، اطلاعاتی از قبیل سری‌های زمانی\RTLfootnote{یعنی این کالا در این زمان از قسمت \lr{stock} خارج شد و در این زمان وارد کامیون حمل شد و این زمان به مشتری تحویل داده شد.}، اطلاعات جغرافیایی\RTLfootnote{یعنی این کالا از این انبار واقع در فلان شهر تحویل داده شد و از طریق این مسیر و آن مسیر به مقصد رسید.} و همچنین وسایل نقلیه استفاده شده برای تحویل مرسوله هستند.

این اطلاعات، چون ماهیت فیزیکی دارند، باید به صورت فیزیکی هم جمع‌آوری شوند و پس از دریافت اطلاعات از سنسور‌‌ها به صورت مناسب و \lr{efficient}\RTLfootnote{برای مثال برای سری‌‌های زمانی، دیتابیس‌های مخصوصی وجود دارد.} ذخیره و بازیابی شوند.

\subsection{ساختار شکست کار}
در این قسمت ساختار شکست کار‌ را نوشته‌ایم. دقت کنید که این جعبه‌ی بزرگ خود شامل ساختارهای شکست کار کوچک‌تر است که هر کدام نقطه‌ی عطف خودش را دارد.

\newpage
\begin{wbsbox}{\nameref{sec:gatherer}}

\begin{wbssub}
{طراحی کلی وب ‌سرویس}
{نوشته شدن \lr{OpenAPI Specification} از روی موارد و تصمیم‌های بالا}
\task
بررسی و استخراج نیازمندی‌ها \\
\task
نوشتن نیازمندی‌ها \\
\task
استخراج کلی
\lr{endpoint}ها\RTLfootnote{یعنی بگوییم برای گرفتن داده‌های فلان قسمت \lr{stock} به یک \lr{endpoint} با این پارامتر‌ها نیاز داریم.}

\task
انتخاب نام برای \lr{endpoint}ها
\end{wbssub}

\begin{wbssub}
{پیاده‌سازی وب ‌سرویس}
{تست و دیپلوی شدن سرویس}
\task
بررسی معماری نرم‌افزاری وب سرویس \\
\task
تعیین و طراحی معماری \\
\task
انتخاب زبان برنامه‌نویسی \\
\task
انتخاب دیتابیس و \lr{toolchain} عه دیتابیس\RTLfootnote{یعنی انتخاب \lr{ORM} یا \lr{ODM}، و همچنین سیستم نگهداری و مدیریت \lr{migration}ها.} \\
\task
پیاده‌سازی \\
\task
تست سرویس \\
\task
داکرایز کردن سرویس \\
\task
دیپلوی کردن سرویس
\end{wbssub}

\wbspart{ssec:stock}
\begin{wbssub}
{نوشتن کد‌های
\lr{monitoring}
برای موجود بودن یا نبودن محصول}
{پاس شدن تمامی تست‌های لازم}
\task 
پیدا کردن توابع و کلاس‌هایی که اطلاعات لازم برای سرویس را تولید یا مصرف می‌کنند \\
\task 
اضافه کردن کد، برای ارسال اطلاعات به وب ‌سرویس \\
\task
تست کردن ارسال اطلاعات \\
\task
تست کردن دریافت صحیح اطلاعات
\end{wbssub}

\begin{wbssub}
{\lr{Integrate} کردن توابعی برای ردیابی و گرفتن و ارسال کردن اطلاعات در قسمت‌های ثبت و پردازش سفارش}
{پاس شدن تمامی تست‌های لازم}
\task 
پیدا کردن توابع و کلاس‌هایی که اطلاعات لازم برای سرویس را تولید یا مصرف می‌کنند \\
\task 
اضافه کردن کد، برای ارسال اطلاعات به وب ‌سرویس \\
\task
تست کردن ارسال اطلاعات \\
\task
تست کردن دریافت صحیح اطلاعات
\end{wbssub}

\begin{wbssub}
{نوشتن توابعی برای ارسال اطلاعات ردیابی محصول در خروج از \lr{Stock}}
{پاس شدن تمامی تست‌های لازم}
پیدا کردن توابع و کلاس‌هایی که اطلاعات لازم برای سرویس را تولید یا مصرف می‌کنند \\
\task 
اضافه کردن کد، برای ارسال اطلاعات به وب ‌سرویس \\
\task
تست کردن ارسال اطلاعات \\
\task
تست کردن دریافت صحیح اطلاعات
\end{wbssub}

\wbspart{ssec:site}
\begin{wbssub}
{تحلیل و طراحی صفحات گرفتن بازخورد}
{تحویل طراحی‌‌های فیگما}
\task
لیست کردن تمامی مواردی که باید از آنها بازخورد گرفته شود \\
\task
طوفان فکری،‌ تحقیق در مورد صفحات \\
\task
تحلیل و طراحی \\
\task
گرفتن بازخورد \\
\task
نهایی کردن طراحی در فیگما
\end{wbssub}

\begin{wbssub}
{نوشتن کد‌های \lr{front-end} برای صفحات طراحی شده}
{تست و تحویل کد‌ها برای به تیم \lr{front-end} آمازون}
\task
طراحی صفحات از روی طرح‌های فیگما \\
\task
نوشتن کد‌ها \\
\task
انجام \lr{integration test}‌ها \\
\task [داکرایز کردن آنها]\RTLfootnote{اینکه این مورد در یک قلاب نوشته شده، یعنی ممکن است الزامی نباشد.}
\end{wbssub}

\begin{wbssub}
{نوشتن کد و استفاده از \lr{Prometheus instrumentation library}ها}{مستقر کردن و تست دریافت اطلاعات آماری}
\task
تحقیق برای پیدا کردن ابزار مناسب \\
\task
انتخاب و یادگیری ابزار مناسب \\
\task
\lr{integrate} کردن آن\\
\task
تست کردن \\
\task
نوشتن کد برای ارسال موارد مورد نیاز به وب سرویس
\end{wbssub}

\wbspart{ssec:shipment}
\begin{wbssub}
{تحقیق در مورد انواع سنسور‌ها برای داده‌های سری‌های زمانی}
{انتخاب سنسور مناسب}
\task
تحقیق در مورد سنسور‌ها \\
\task
بررسی سنسور‌ها برای نصب
\end{wbssub}
\begin{wbssub}
{تست کردن اطلاعات دریافتی}
{\lr{verfiy} شدن اطلاعات دریافتی}
\task
تست کردن سنسورها در شرایط آزمایشگاهی \\
\task
تست کردن سنسورها در شرایط طبیعی \\
\task
بررسی نتایج تست‌ها \\
\task
نوشتن ماژول‌های سخت‌افزاری برای ارسال اطلاعات به وب ‌سرویس
\end{wbssub}

\begin{wbssub}
{تحقیق در مورد انواع سنسور‌ها برای داده‌های جغرافیایی}
{انتخاب سنسور مناسب}
\task
تحقیق در مورد سنسور‌ها \\
\task
بررسی سنسور‌ها برای نصب
\end{wbssub}

\begin{wbssub}
{تست کردن اطلاعات دریافتی}
{\lr{verfiy} شدن اطلاعات دریافتی}
\task
تست کردن سنسورها در شرایط آزمایشگاهی \\
\task
تست کردن سنسورها در شرایط طبیعی \\
\task
بررسی نتایج تست‌ها \\
\task
نوشتن ماژول‌های سخت‌افزاری برای ارسال اطلاعات به وب ‌سرویس
\end{wbssub}

\begin{wbssub}
{انتخاب دیتابیس مناسب برای داده‌های سری زمانی}
{انتخاب شدن یک دیتابیس مناسب}
\task
تحقیق در مورد دیتابیس‌‌های مخصوص سری زمانی موجود \\
\task
بررسی نیازمندی‌های 
\lr{Amazon Analytics} \\
\task
بررسی عمیق و تطبیق‌ دادن قابلیت‌ها و نیازمندی‌ها \\
\end{wbssub}

\begin{wbssub}
{انتخاب دیتابیس مناسب برای داده‌های جغرافیایی}
{انتخاب شدن یک دیتابیس مناسب}
\task
تحقیق در مورد دیتابیس‌‌های مخصوص سری زمانی موجود \\
\task
بررسی نیازمندی‌های 
\lr{Amazon Analytics} \\
\task
بررسی عمیق و تطبیق‌ دادن قابلیت‌ها و نیازمندی‌ها
\end{wbssub}
\end{wbsbox}

\section{وب سرویس تحلیل داده و ارائه گزارش}\label{sec:processor}
وظیفه‌ی این وب‌ سرویس، تحلیل‌ داده‌ها و ارائه‌ی تحلیل‌هاست. ارائه شکل‌‌های مختلفی از گزارشات از قبیل نمودار‌ها و گزارش‌های 
\lr{time series}
و... هم به عهده‌ی این وب سرویس است.

داده‌های مورد نیاز این سرویس، به صورت کاملا ساختاربندی شده و تمیز از
\ref{sec:gatherer}
تامین می‌شوند. یعنی این سرویس هیچ وابستگی به قسمت‌های دریافت اطلاعات\RTLfootnote{آنهایی که از سنسور‌‌ها و سیستم‌های آمازون جمع می‌شوند.}  ندارد و فقط به \lr{endpoint}‌های این وب سرویس وابستگی دارد.\RTLfootnote{یعنی سرویس‌‌ها کاملا \lr{decouple} شده‌اند.}

در ادامه راجع به قسمت‌های مختلف شرکت و ارتباط آنها با وب سرویس توضیح داده خواهد شد و در نهایت بسته شکست کاری این قسمت نشان داده می‌شود.

\subsection{\lr{Stock}}\label{second-web-service:stock}
تحلیل‌ داده‌های دریافتی از 
\ref{sec:gatherer}
در قسمت 
\lr{Stock}
شامل تحلیل‌ها در مورد:
\begin{enumerate}
\item\label{1}
بررسی مدت‌‌دار موجود بودن کالا‌های خریداری شده\RTLfootnote{این بررسی برای تحلیل عملکرد انبارداری آمازون استفاده می‌شود.}

\item\label{2}
بررسی زمان پردازش یک محصول از لحظه‌ی ثبت شدن توسط مشتری تا اتمام پردازش در قسمت انبار\RTLfootnote{این بررسی برای تحلیل عملکرد پردازنده‌های کالا در انبار‌ها استفاده می‌شود.}

\item\label{3}
بررسی موقعیت مکانی سفارش دهنده‌ها و موقعیت مکانی انبار انتخاب شده برای پردازش محصول\RTLfootnote{این بررسی برای تحلیل اینکه آیا نزدیک‌ترین یا خلوت‌ترین انبار برای پردازش انتخاب می‌شود یا خیر استفاده می‌شود.}

\end{enumerate}

نرم‌افزار‌های تحلیل‌گر این قسمت نیازمند دریافت داده‌ها به صورت لحظه‌ای یا با دوره‌های کوتاه هستند تا بتوانند تحلیل‌های دقیق زمانی و جغرافیایی ارائه دهند.

\subsection{\lr{Site}}

\subsection{\lr{Shipment}}

\subsection{ساختار شکست کار}
\begin{wbsbox}{\nameref{sec:processor}}

\begin{wbssub}
{طراحی کلی وب سرویس}
{نوشته شدن \lr{OpenAPI Specification} از روی موارد و تصمیم‌های بالا}
بررسی و استخراج نیازمندی‌ها \\
\task
نوشتن نیازمندی‌ها \\
\task
استخراج کلی
\lr{endpoint}ها\RTLfootnote{یعنی مثلا بگوییم برای بررسی مکان سفارش‌ها و مکان انبار انتخابی به چه داده‌ها و چگونه به آنها نیاز داریم}

\task
انتخاب نام برای \lr{endpoint}ها
\end{wbssub}

\begin{wbssub}
{پیاده‌سازی وب ‌سرویس}
{تست و دیپلوی شدن سرویس}
\task
بررسی معماری نرم‌افزاری وب سرویس \\
\task
تعیین و طراحی معماری \\
\task
انتخاب زبان برنامه‌نویسی \\
\task
انتخاب دیتابیس و \lr{toolchain} عه دیتابیس\RTLfootnote{یعنی انتخاب \lr{ORM} یا \lr{ODM}، و همچنین سیستم نگهداری و مدیریت \lr{migration}ها.} \\
\task
پیاده‌سازی \\
\task
تست سرویس \\
\task
داکرایز کردن سرویس \\
\task
دیپلوی کردن سرویس
\end{wbssub}

\wbspart{second-web-service:stock}
\begin{wbssub}
{نوشتن \lr{endpoint}ها و منطق لازم برای \ref{1}}
{تایید صحت عملکرد}
\task 
بررسی شفافی و کتبی\RTLfootnote{بررسی ریاضی‌وار} مسئله \\
\task
پیدا کردن راه‌حل درست برای تحلیل زمانی \\
\task
توافق روی نتایجی که راه‌حل انتخاب شده ارائه \\
\task
پیاده‌سازی \\
\task
تست کد‌‌های نوشته شده
\end{wbssub}

\begin{wbssub}
{نوشتن \lr{endpoint}ها و منطق لازم برای \ref{2}}
{تایید صحت عملکرد}
\task 
بررسی شفافی و کتبی\RTLfootnote{بررسی ریاضی‌وار} مسئله \\
\task
پیدا کردن راه‌حل درست برای تحلیل زمانی \\
\task
توافق روی نتایجی که راه‌حل انتخاب شده ارائه \\
\task
پیاده‌سازی \\
\task
تست کد‌‌های نوشته شده
\end{wbssub}

\begin{wbssub}
{نوشتن \lr{endpoint}ها و منطق لازم برای \ref{3}}
{تایید صحت عملکرد}
\task 
بررسی شفافی و کتبی\RTLfootnote{بررسی ریاضی‌وار} مسئله \\
\task
پیدا کردن راه‌حل درست برای تحلیل زمانی \\
\task
توافق روی نتایجی که راه‌حل انتخاب شده ارائه \\
\task
پیاده‌سازی \\
\task
تست کد‌‌های نوشته شده
\end{wbssub}

\end{wbsbox}

\section{وب اپلیکیشن}